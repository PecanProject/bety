<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
</head>
<body>
<p><a id="Section 4.3"></a><br />### Data Access</p>
<p>Data is made available for analysis after it is submitted and reviewed by a database administrator. These data are suitable for basic scientific research and modeling. All reviewed data are made publicly available after publication to users of BETY-db who are conducting primary research. Access to these raw data is provided to users based on affiliation and contribution of data.</p>
<h4 id="search-box">Search Box</h4>
<p>The search box allows for a trait or yield to be entered, which yields the following screen and narrowed search options:</p>
<p>[] (figures/search_advancedsearch.png)</p>
<h4 id="advanced-search">Advanced Search</h4>
<p>The advanced search can be accessed by selecting the link on the homepage under the search bar or by searching in the search bar, as this function brings the viewer to the same screen (shown above).</p>
<h4 id="access-maps">Access Maps</h4>
<p>There are five different search and data output methods that can be utilized under the Maps tab:</p>
<p><strong>1. Sites by Species</strong></p>
<p>The Sites by Species map allows groups to be searched by selecting criteria from a drop-down menu or by a common name or genus entered into the search bar below the map. Both methods of search show the location of the site on the map and the location details underneath the map.</p>
<p>[] (figures/sites_by_species_screenshot.png)</p>
<p><strong>2. Search for Sites</strong></p>
<p>Utilizing the drop-down menu for radius distances of 20, 40, 60, 80, 100, or 200 miles and then clicking on a location on the map presents sites within that range from the point. Site city, state, country, latitude, longitude, mean annual temperature, mean annual precipitation, and elevation are displayed under the map for each site and can be used to further narrow the output.</p>
<p>[] (figures/search_sites_map.png)</p>
<p><strong>3. Location Yield</strong></p>
<p>The Location Yield map narrows model output by yield, evapotranspiration, and production cost. Yield and evapotranspiration can be narrowed by species and then county (displays longitude, latitude, and yield in text format) or gridded (displays state, county, and yield in a text format). Production cost can yield county data, as well as a least cost yield listing. A fullscreen button enables viewing of the map in greater detail.</p>
<p>[] (figures/location_yields.png)</p>
<p><strong>4. Traits from Sites</strong></p>
<p>The Sites with Trait Data map displays all of the sites that have trait data in the database. Clicking on a site's button provides the name of the site, and the species, cultivar, and citation(s) affiliated with that site, all of which link to more detailed information. The traits link connects to a full listing of traits for the site with all available information for the traits.</p>
<p>[] (figures/site_trait_data.png)</p>
<p><strong>5. Yields from Sites</strong></p>
<p>(not currently up on the new site)</p>
<h5 id="download-data-from-model-output">Download Data from Model Output</h5>
<p>Data can be downloaded directed by selecting the download button when the desired data is presented in the model. The data with a title will be downloaded.</p>
<h4 id="url-based-queries">URL-based Queries</h4>
<h5 id="easy-csv-downloads">Easy CSV downloads</h5>
<p>Data can be downloaded as a <code>.csv=</code> file, and data from previously published syntheses can be downloaded without login. For example, to download all of the Switchgrass (<em>Panicum virgatum</em> L.) yield data,</p>
<ol style="list-style-type: decimal">
<li>Open the BETY homepage <a href="https://www.bety.org/">www.betydb.org</a></li>
<li>Select <a href="https://www.betydb.org/maps/species_details">Species</a> under BETYdb</li>
<li>Select <a href="https://www.betydb.org/maps/yields?species=938">Yields</a> under BETYdb</li>
<li>To download all records as a comma-delimited (<code>.csv</code>) file, scroll down and select the link <a href="http://ebi-forecast.igb.uiuc.edu/bety/maps/yields?format=csv\&amp;species=938">http://ebi-forecast.igb.uiuc.edu/bety/maps/yields?format=csv\&amp;species=938</a> *(In CSV Format)</li>
</ol>
<h4 id="json-csv-and-xml-api">JSON, CSV, and XML API</h4>
<p>The format of your request will need to be:</p>
<p>BetyDB has the ability to return any object in these three formats. All the tables in BetyDB are RESTful, which allows you to GET, POST, PUT, or DELETE them without interacting with the web interface. Here are some examples:</p>
<ol style="list-style-type: decimal">
<li>https://www.betydb.org/citations.json Return all citations in json format (replace json with xml or csv for those formats)</li>
<li>https://www.betydb.org/citations.json?journal=Agronomy%20Journal Return all citations with the field journal equal to ‘Agronomy Journal’</li>
<li>https://www.betydb.org/citations.json?journal=Agronomy%20Journal&amp;author=Adler Return all citations with the field journal equal to ‘Agronomy Journal’ and author equal to ‘Adler’ (sorry no ability to combine with ‘or’ yet)</li>
<li>https://www.betydb.org/citations.json?include[]=sites Return all citations with their associated sites (you use the singular version of the associated tables name - site - when the relationship is many to one, and the plural when many to many; hint: if the id of the table you are attempting to include is in the record - relatedtable_id - then it is the singular version.</li>
<li>https://www.betydb.org/citations.json?include[]=sites&amp;include[]=yields Return all citations with their associated sites and yields (working on ability to nest this deeper)</li>
<li>https://www.betydb.org/citations.json?journal=Agronomy%20Journal&amp;author=Adler&amp;include[]=sites&amp;include[]=yields Return all citations with the field journal equal to ‘Agronomy Journal’ and author equal to ‘Adler’ with their associated sites and yields.</li>
<li>https://www.betydb.org/citations/1.json Return citation 1 in json format, can also be achieved by adding ’?id=1’ to line 1</li>
<li>https://www.betydb.org/citations/1.json?include[]=sites Return citation 1 in json format with it’s associated sites</li>
<li>https://www.betydb.org/citations/1.json?include[]=sites&amp;include[]=yields Return citation 1 in json format with it’s associated sites and yields</li>
</ol>
<h4 id="api-keys">API keys</h4>
<p>Using an API key allows access to data without having to enter a login. To use an API key, simply append @?key=<your_api_key>@ to the end of the URL. Each user must obtain a unique API key.</p>
<h3 id="installing-bety-the-complete-database">Installing BETY (the complete database)</h3>
<p>There are two flavors of BETY: PHP and RUBY. The PHP version allows for minimal interaction with the database while the RUBY version allows for full interaction with the database. Both, however, require the database to be created and installed.</p>
<h3 id="database-creation">Database creation</h3>
<p>The following creates the user, database and populates the database with the latest version from Illinois.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># needs to be done only once</span>
<span class="kw">mysql</span> -u root -p -e <span class="st">&quot;grant all on bety.* to bety@localhost identified by &#39;bety&#39;;&quot;</span>
<span class="kw">curl</span> -o <span class="ot">${HOME}</span>/updatedb.sh http://isda.ncsa.illinois.edu/~kooper/EBI/updatedb.sh
<span class="kw">chmod</span> 755 <span class="ot">${HOME}</span>/updatedb.sh

<span class="co"># download and update/install database</span>
<span class="ot">${HOME}</span><span class="kw">/updatedb.sh</span></code></pre>
</body>
</html>
